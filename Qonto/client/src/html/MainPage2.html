<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="MainPage2.css" />
  <!-- ШРИФТЫ -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Ubuntu:wght@500;700&display=swap" rel="stylesheet">
  <title>MainPage</title>
</head>
<body>
    <header class="hdr">
  <!-- фоновый прямоугольник -->
  <div class="hdr-bg"></div>

  <!-- LOGO -->
  <a class="logo" href="#">
    <span class="logo-text">Qonte</span>
    <span class="logo-dot" aria-hidden="true"></span>
  </a>

  <!-- SEARCH GROUP -->
  <form class="search-wrap" action="#" role="search">
  <input class="search-input" type="text" placeholder="Пошук..." aria-label="Пошук">
  <button class="search-btn" type="submit" aria-label="Найти">
    <svg viewBox="0 0 24 24" aria-hidden="true">
      <circle cx="10" cy="10" r="6.5" fill="none" stroke="#7AD293" stroke-width="1.5"/>
      <rect x="16" y="16" width="6" height="6" rx="1.2" fill="#7AD293"/>
    </svg>
  </button>
</form>

  <!-- КНОПКА AI -->
<button class="btn-ai" type="button">
  <span class="ai-ico" aria-hidden="true">
    <!-- иконка «робот/ИИ» -->
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="#7AD293" stroke-width="2">
      <circle cx="12" cy="12" r="9"/>
      <circle cx="9" cy="10" r="1"/>
      <circle cx="15" cy="10" r="1"/>
      <path d="M8 15c1.5 1 3.5 1 5 0"/>
    </svg>
  </span>
  <span class="ai-label">AI-Консультант</span>
</button>

<!-- КНОПКА КАТАЛОГ -->
<button class="btn-cat" type="button">
  <span class="cat-ico" aria-hidden="true">
    <!-- иконка «меню/каталог» -->
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="#7AD293" stroke-width="2">
      <rect x="3" y="4" width="7" height="7"/>
      <rect x="14" y="4" width="7" height="7"/>
      <rect x="3" y="13" width="7" height="7"/>
      <rect x="14" y="13" width="7" height="7"/>
    </svg>
  </span>
  <span class="cat-label">Каталог</span>
</button>

  <!-- ИКОНКИ 3–6 -->
  <button class="ico ico-lang" type="button" aria-label="Выбор языка">
    <!-- Иконка "язык" -->
    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="#ECECEC" stroke-width="2" viewBox="0 0 24 24">
      <circle cx="12" cy="12" r="10"/>
      <path d="M2 12h20M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
    </svg>
  </button>

  <button class="ico ico-heart" type="button" aria-label="Избранное">
    <!-- Иконка "сердце" -->
    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="#ECECEC" stroke-width="2" viewBox="0 0 24 24">
      <path d="M12 21s-6-4.3-9-8.6C1 9.3 3.5 5 7.5 5c2.1 0 3.5 1.1 4.5 2.5C13 6.1 14.4 5 16.5 5 20.5 5 23 9.3 21 12.4c-3 4.3-9 8.6-9 8.6z"/>
    </svg>
  </button>

  <button class="ico ico-cart" type="button" aria-label="Корзина">
    <!-- Иконка "корзина" -->
    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="#ECECEC" stroke-width="2" viewBox="0 0 24 24">
      <circle cx="9" cy="21" r="1"/>
      <circle cx="20" cy="21" r="1"/>
      <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
    </svg>
  </button>

  <button class="ico ico-user" type="button" aria-label="Аккаунт">
    <!-- Иконка "пользователь" -->
    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="#7AD293" viewBox="0 0 24 24">
      <circle cx="12" cy="8" r="4"/>
      <path d="M6 20c0-3.3 2.7-6 6-6s6 2.7 6 6"/>
    </svg>
  </button>
</header>





<h4 class="popular-title">Популярнi категорії</h4>

<!-- Group 27 — Більше товарів -->
<a class="link-more" href="#" aria-label="Більше товарів">
  <span class="text">Більше товарів</span>
  <span class="icon"><img src="arrow.png" alt=""></span>
</a>

<!-- Group 26 — Усі категорії -->
<a class="link-all" href="#" aria-label="Усі категорії">
  <span class="text">Усі категорії</span>
  <span class="icon"><img src="arrow.png" alt=""></span>
</a>

<!-- Кнопка (Group 108 / "каталог блок") -->
<button class="catalog-btn-sm group-108" type="button" aria-label="Електричні девайси">
  <span class="rect-29" aria-hidden="true"></span>

  <!-- Заголовок + маленькая иконка (правый верх) -->
  <span class="title-wrap">
    <span class="title">Електричні девайси</span>
    <span class="title-icon"><img src="planex.png" alt=""></span>
  </span>

  <!-- Большое изображение (нижняя часть) -->
  <img class="gfx-hero" src="mobile.png" alt="">
</button>

<!-- Group 109 -->
<button class="catalog-btn-sm group-109" type="button" aria-label="Краса та здоров'я">
  <span class="rect-29" aria-hidden="true"></span>
  <span class="title-wrap">
    <span class="title">Краса та здоров'я</span>
    <span class="title-icon"><img src="planex.png" alt=""></span>
  </span>
  <img class="gfx-hero" src="beauty.png" alt="">
</button>

<!-- Group 110 -->
<button class="catalog-btn-sm group-110" type="button" aria-label="Меблі">
  <span class="rect-29" aria-hidden="true"></span>
  <span class="title-wrap">
    <span class="title">Меблі</span>
    <span class="title-icon"><img src="planex.png" alt=""></span>
  </span>
  <img class="gfx-hero" src="furniture.png" alt="">
</button>

<!-- Group 111 -->
<button class="catalog-btn-sm group-111" type="button" aria-label="Жінкам">
  <span class="rect-29" aria-hidden="true"></span>
  <span class="title-wrap">
    <span class="title">Жінкам</span>
    <span class="title-icon"><img src="planex.png" alt=""></span>
  </span>
  <img class="gfx-hero" src="woman.png" alt="">
</button>

<!-- Group 112 -->
<button class="catalog-btn-sm group-112" type="button" aria-label="Чоловікам">
  <span class="rect-29" aria-hidden="true"></span>
  <span class="title-wrap">
    <span class="title">Чоловікам</span>
    <span class="title-icon"><img src="planex.png" alt=""></span>
  </span>
  <img class="gfx-hero" src="man.png" alt="">
</button>

<!-- Group 113 -->
<button class="catalog-btn-sm group-113" type="button" aria-label="Дітям">
  <span class="rect-29" aria-hidden="true"></span>
  <span class="title-wrap">
    <span class="title">Дітям</span>
    <span class="title-icon"><img src="planex.png" alt=""></span>
  </span>
  <img class="gfx-hero" src="kids.png" alt="">
</button>

<h4 class="sale-title">Акційні товари</h4>






<!-- Товар блок -->
<div class="product-card">
  <a class="product-link" href="#" aria-label="Відкрити сторінку товару"></a>
  <!-- Маска фото -->
  <div class="photo-mask">
    <div class="photo-bg"></div>
    <!-- Основное фото (подставь своё) -->
    <img class="photo-img" src="poroshok2.png" alt="Фото товару">
    <!-- Бейдж скидки: фон-таблетка + текст картинкой -->
    <span class="badge">
      <span class="badge-bg" aria-hidden="true"></span>
      <img class="badge-img" src="discount.png" alt="">
    </span>
  </div>

  <!-- Внешняя рамка карточки -->
  <span class="card-frame" aria-hidden="true"></span>

  <!-- Название товара -->
  <div class="title">Пральний порошок, 2 кг</div>

  <!-- Рейтинг: звезда (иконка) + значение -->
  <div class="rating">
    <span class="star">
      <img src="star.png" alt="">
    </span>
    <span class="val">4,4</span>
  </div>

  <!-- Цены + действия -->
  <div class="price-row">
    <span class="price-now">207 грн</span>
    <span class="price-old">259 грн</span>

    <!-- Две кнопки-иконки справа (подставь изображения при необходимости) -->
    <button class="btn-ghost" type="button" aria-label="Дія 1">
      <img src="favorites.png" alt="">
    </button>
    <button class="btn-green" type="button" aria-label="Дія 2">
      <img src="basket.png" alt="">
    </button>
  </div>
</div>






<!-- Локальная правая панель по макету -->
<div class="side-panel-local" id="sidePanelLocal" aria-hidden="true">
  <div class="panel-rect">

    <div class="price-group" id="priceGroup" data-min="0" data-max="100000">
  <div class="price-title">Ціна</div>

  <div class="price-track">
    <div class="price-track-line"></div>
  </div>

  <!-- активный отрезок и точки — на уровне .price-track -->
  <div class="price-active" hidden></div>
  <div class="price-dot price-dot--min" hidden></div>
  <div class="price-dot price-dot--max" hidden></div>

  <div class="price-io">
    <span class="price-label price-label--from">від</span>
    <input type="number" class="price-input price-input--from" inputmode="numeric" placeholder="0">

    <span class="price-label price-label--to">до</span>
    <input type="number" class="price-input price-input--to" inputmode="numeric" placeholder="100 000">

    <span class="price-underline price-underline--from"></span>
    <span class="price-underline price-underline--to"></span>
  </div>
</div>


    <button class="panel-close" type="button" aria-label="Закрити">×</button>
    <div class="flt-title flt-availability">Наявність</div>

<button class="flt-box box-instock" type="button" role="checkbox" aria-checked="false" aria-labelledby="lbl-instock"></button>
<div id="lbl-instock" class="flt-label lbl-instock">В наявності</div>

<button class="flt-box box-outstock" type="button" role="checkbox" aria-checked="false" aria-labelledby="lbl-outstock"></button>
<div id="lbl-outstock" class="flt-label lbl-outstock">Немає в наявності</div>

<!-- Group 634 — блок "Популярність" -->
<div class="flt-title flt-popularity">Популярність</div>

<button class="flt-box box-hit" type="button" role="checkbox" aria-checked="false" aria-labelledby="lbl-hit"></button>
<div id="lbl-hit" class="flt-label lbl-hit">Хіт продажів</div>

<button class="flt-box box-new" type="button" role="checkbox" aria-checked="false" aria-labelledby="lbl-new"></button>
<div id="lbl-new" class="flt-label lbl-new">Новинка</div>

<!-- Group 631 — секция "Акційний товар" -->
<div class="flt-title flt-promo">Акційний товар</div>

<!-- Так -->
<button class="flt-box box-promo-yes" type="button" role="checkbox" aria-checked="false" aria-labelledby="lbl-promo-yes"></button>
<div id="lbl-promo-yes" class="flt-label lbl-promo-yes">Так</div>

<!-- Ні -->
<button class="flt-box box-promo-no" type="button" role="checkbox" aria-checked="false" aria-labelledby="lbl-promo-no"></button>
<div id="lbl-promo-no" class="flt-label lbl-promo-no">Ні</div>

<!-- Group 633 — секция "Рейтинг" -->
<div class="flt-title flt-rating-title">Рейтинг</div>

<div class="stars-group" role="radiogroup" aria-label="Рейтинг" data-rating="0">
  <!-- 5 звёзд слева направо -->
  <button class="star" type="button" aria-checked="false" role="radio" tabindex="0">
    <img class="star-img"
         src="starg.png"
         data-off-src="starg.png"
         data-on-src="star.png"
         alt="1 з 5">
  </button>
  <button class="star" type="button" aria-checked="false" role="radio" tabindex="0">
    <img class="star-img"
         src="starg.png"
         data-off-src="starg.png"
         data-on-src="star.png"
         alt="2 з 5">
  </button>
  <button class="star" type="button" aria-checked="false" role="radio" tabindex="0">
    <img class="star-img"
         src="starg.png"
         data-off-src="starg.png"
         data-on-src="star.png"
         alt="3 з 5">
  </button>
  <button class="star" type="button" aria-checked="false" role="radio" tabindex="0">
    <img class="star-img"
         src="starg.png"
         data-off-src="starg.png"
         data-on-src="star.png"
         alt="4 з 5">
  </button>
  <button class="star" type="button" aria-checked="false" role="radio" tabindex="0">
    <img class="star-img"
         src="starg.png"
         data-off-src="starg.png"
         data-on-src="star.png"
         alt="5 з 5">
  </button>
</div>

<!-- Заголовок секции -->
<div class="cat-title">Категорія товарів</div>

<!-- Прокручиваемая область (Frame 626) -->
<div class="cat-scroll">
  <!-- Примеры пунктов; добавляй ещё такие же .cat-item -->
  <div class="cat-item">
    <button class="cat-check" type="button" role="checkbox" aria-checked="false" aria-labelledby="cat-1"></button>
    <span id="cat-1" class="cat-label">Електронні девайси</span>
  </div>
  <div class="cat-item">
    <button class="cat-check" type="button" role="checkbox" aria-checked="false" aria-labelledby="cat-2"></button>
    <span id="cat-2" class="cat-label">Краса та здоров’я</span>
  </div>
  <div class="cat-item">
    <button class="cat-check" type="button" role="checkbox" aria-checked="false" aria-labelledby="cat-3"></button>
    <span id="cat-3" class="cat-label">Меблі</span>
  </div>
  <div class="cat-item">
    <button class="cat-check" type="button" role="checkbox" aria-checked="false" aria-labelledby="cat-4"></button>
    <span id="cat-4" class="cat-label">Жінкам</span>
  </div>
  <div class="cat-item">
    <button class="cat-check" type="button" role="checkbox" aria-checked="false" aria-labelledby="cat-5"></button>
    <span id="cat-5" class="cat-label">Чоловікам</span>
  </div>
  <div class="cat-item">
    <button class="cat-check" type="button" role="checkbox" aria-checked="false" aria-labelledby="cat-6"></button>
    <span id="cat-6" class="cat-label">Дітям</span>
  </div>
  <div class="cat-item">
    <button class="cat-check" type="button" role="checkbox" aria-checked="false" aria-labelledby="cat-7"></button>
    <span id="cat-7" class="cat-label">Спорт та відпочинок</span>
  </div>
  <div class="cat-item">
    <button class="cat-check" type="button" role="checkbox" aria-checked="false" aria-labelledby="cat-8"></button>
    <span id="cat-8" class="cat-label">Автотовари</span>
  </div>
  <div class="cat-item">
    <button class="cat-check" type="button" role="checkbox" aria-checked="false" aria-labelledby="cat-9"></button>
    <span id="cat-9" class="cat-label">Для дому</span>
  </div>
  <div class="cat-item">
    <button class="cat-check" type="button" role="checkbox" aria-checked="false" aria-labelledby="cat-10"></button>
    <span id="cat-10" class="cat-label">Іграшки</span>
  </div>
  <div class="cat-item">
    <button class="cat-check" type="button" role="checkbox" aria-checked="false" aria-labelledby="cat-11"></button>
    <span id="cat-11" class="cat-label">Продукти харчування</span>
  </div>
  <div class="cat-item">
    <button class="cat-check" type="button" role="checkbox" aria-checked="false" aria-labelledby="cat-12"></button>
    <span id="cat-12" class="cat-label">Товари для тварин</span>
  </div>
  <div class="cat-item">
    <button class="cat-check" type="button" role="checkbox" aria-checked="false" aria-labelledby="cat-13"></button>
    <span id="cat-13" class="cat-label">Канцелярія</span>
  </div>
  <div class="cat-item">
    <button class="cat-check" type="button" role="checkbox" aria-checked="false" aria-labelledby="cat-14"></button>
    <span id="cat-14" class="cat-label">Сад і город</span>
  </div>
  <div class="cat-item">
    <button class="cat-check" type="button" role="checkbox" aria-checked="false" aria-labelledby="cat-15"></button>
    <span id="cat-15" class="cat-label">Будівництво та ремонт</span>
  </div>



  </div>
</div>










<footer class="ftr" role="contentinfo">
  <div class="ftr-bg"></div>

  <!-- Колонки -->
  <h4 class="ftr-h4 ftr-h4--info">Інформація о компанії</h4>
  <ul class="ftr-list ftr-list--info">
    <li><a href="#">Про нас</a></li>
    <li><a href="#">Умови використання сайту</a></li>
    <li><a href="#">Вакансії</a></li>
    <li><a href="#">Контакти</a></li>
    <li><a href="#">Зворотній зв’язок</a></li>
  </ul>

  <h4 class="ftr-h4 ftr-h4--help">Допомога</h4>
  <ul class="ftr-list ftr-list--help">
    <li><a href="#">Часті питання</a></li>
    <li><a href="#">Доставка та оплата</a></li>
    <li><a href="#">Гарантія</a></li>
    <li><a href="#">Повернення</a></li>
  </ul>

  <h4 class="ftr-h4 ftr-h4--sellers">Продавцям</h4>
  <ul class="ftr-list ftr-list--sellers">
    <li><a href="#">Продавати товари</a></li>
    <li><a href="#">Правила торгівлі</a></li>
  </ul>

  <!-- Соцсети -->
  <h4 class="ftr-h4 ftr-h4--social">Ми в соціальних мережах</h4>
  <a class="ftr-soc ftr-soc--ig" href="#" aria-label="Instagram">
    <svg viewBox="0 0 24 24" width="22" height="22" fill="none">
      <rect x="3" y="3" width="18" height="18" rx="5" stroke="#ECECEC" stroke-width="2"/>
      <circle cx="12" cy="12" r="4" stroke="#ECECEC" stroke-width="2"/>
      <circle cx="17" cy="7" r="1" fill="#ECECEC"/>
    </svg>
  </a>
  <a class="ftr-soc ftr-soc--fb" href="#" aria-label="Facebook">
    <svg viewBox="0 0 24 24" width="22" height="22" fill="#ECECEC">
      <path d="M13.5 21v-7h2.3l.4-3H13.5V9.1c0-.9.3-1.5 1.7-1.5H16V5.1c-.3 0-1.3-.1-2.4-.1-2.4 0-4 1.4-4 3.9V11H7v3h2.6v7h3.9z"/>
    </svg>
  </a>
  <a class="ftr-soc ftr-soc--tt" href="#" aria-label="TikTok">
    <svg viewBox="0 0 24 24" width="22" height="22" fill="#ECECEC">
      <path d="M15 3c.6 1.8 2 3.2 3.8 3.7v3.1c-1.5-.1-2.9-.6-4-1.5v5.9a5.6 5.6 0 1 1-5.6-5.6c.5 0 1 .1 1.4.2v3a2.5 2.5 0 1 0 2.2 2.5V3h2.2z"/>
    </svg>
  </a>

  <!-- Декоративная фигура справа -->
  <img class="ftr-mascot" src="maskotfooter.png" alt="Маскот Qonto">

  <!-- Копирайт -->
  <p class="ftr-copy">©2025 Платформа онлайн-торгівлі «Qonto» — використовується на підставі ліцензії правовласника</p>
</footer>



<script>
(function(){
  const moreLink = document.querySelector('.link-more');           // "Більше товарів"
  const panel    = document.getElementById('sidePanelLocal');      // локальная правая панель
  const closeBtn = panel?.querySelector('.panel-close');
  const product  = document.querySelector('.product-card');

  if (!moreLink || !panel || !closeBtn || !product) return;

  // ТОЛЬКО наши добавленные элементы (кроме товарных блоков)
  const HIDE_SELECTORS = [
    '.popular-title',
    '.sale-title',
    '.link-all',
    '.link-more',
    '.catalog-btn',
    '.catalog-btn-sm'
  ];

  const toHide = () =>
    Array.from(document.querySelectorAll(HIDE_SELECTORS.join(',')))
      .filter(el => !el.closest('#sidePanelLocal')); // не трогаем панель

  // Плавное исчезновение
  function fadeOutElements(els){
    els.forEach(el => {
      if (el.classList.contains('is-hidden')) return;
      el.classList.add('is-vanished');
      const onEnd = (e)=>{
        if (e.propertyName !== 'opacity') return;
        el.classList.add('is-hidden');
        el.removeEventListener('transitionend', onEnd);
      };
      el.addEventListener('transitionend', onEnd);
      setTimeout(()=> el.classList.add('is-hidden'), 260); // страховка
    });
  }

  // Плавное появление
  function fadeInElements(els){
    els.forEach(el => {
      if (!el.classList.contains('is-hidden')) return;
      el.classList.remove('is-hidden');
      el.classList.add('is-vanished');
      void el.offsetWidth;              // рефлоу
      el.classList.remove('is-vanished');
    });
  }

  function openPanel(e){
    e && e.preventDefault();
    const targets = toHide();
    fadeOutElements(targets);                 // мягко прячем только нужные элементы
    product.classList.add('product-card--moved'); // карточка переедет на (80, 688)
    panel.classList.add('is-open');          // панель выезжает на свои координаты
    panel.setAttribute('aria-hidden','false');

    initPanelCheckboxes();                   // чекбоксы (наявність/популярність)
    initPanelPromoRadios();                  // Так/Ні (акційний товар)
    initPanelStars();                        // Рейтинг из 5 звёзд (картинки)
    initCategoryList();                      // Прокручиваемый список категорий
    initPrice();                             // Ціна: линия + точки + активный отрезок

    closeBtn.focus();
  }

  function closePanel(){
    panel.classList.remove('is-open');
    panel.setAttribute('aria-hidden','true');
    const targets = toHide();
    fadeInElements(targets);                 // мягко показываем обратно
    product.classList.remove('product-card--moved'); // карточка возвращается
    moreLink.focus();
  }

  moreLink.addEventListener('click', openPanel);
  closeBtn.addEventListener('click', closePanel);
  document.addEventListener('keydown', (e)=>{
    if (e.key === 'Escape' && panel.classList.contains('is-open')) closePanel();
  });

  /* ============================
     ЧЕКБОКСЫ В ПРАВОЙ ПАНЕЛИ
     ============================ */
  function initPanelCheckboxes(){
    const pairs = [
      ['.box-instock',  '.lbl-instock'],
      ['.box-outstock', '.lbl-outstock'],
      ['.box-hit',      '.lbl-hit'],
      ['.box-new',      '.lbl-new'],
    ];

    pairs.forEach(([boxSel, lblSel]) => {
      const box = panel.querySelector(boxSel);
      const lbl = panel.querySelector(lblSel);
      if (!box || !lbl) return;
      if (box.dataset.bound === '1') return;

      box.dataset.bound = '1';

      const toggle = () => {
        const state = box.getAttribute('aria-checked') === 'true';
        const next = !state;
        box.setAttribute('aria-checked', String(next));
        box.classList.toggle('is-checked', next);
      };

      box.addEventListener('click', toggle);
      lbl.addEventListener('click', toggle);
      box.setAttribute('tabindex', box.getAttribute('tabindex') || '0');
      box.addEventListener('keydown', (e)=>{
        if (e.key === ' ' || e.key === 'Enter') { e.preventDefault(); toggle(); }
      });
    });
  }

  /* ============================
     АКЦІЙНИЙ ТОВАР: Так / Ні
     ============================ */
  function initPanelPromoRadios(){
    const yesBox = panel.querySelector('.box-promo-yes');
    const noBox  = panel.querySelector('.box-promo-no');
    const yesLbl = panel.querySelector('.lbl-promo-yes');
    const noLbl  = panel.querySelector('.lbl-promo-no');
    if (!yesBox || !noBox || yesBox.dataset.bound === '1' || noBox.dataset.bound === '1') return;

    yesBox.dataset.bound = noBox.dataset.bound = '1';

    const setState = (which) => {
      const y = (which === 'yes');
      yesBox.setAttribute('aria-checked', String(y));
      noBox .setAttribute('aria-checked', String(!y));
      yesBox.classList.toggle('is-checked', y);
      noBox .classList.toggle('is-checked', !y);
    };

    const onYes = ()=> setState('yes');
    const onNo  = ()=> setState('no');

    yesBox.addEventListener('click', onYes);
    yesLbl && yesLbl.addEventListener('click', onYes);
    noBox.addEventListener('click', onNo);
    noLbl && noLbl.addEventListener('click', onNo);

    [yesBox, noBox].forEach(el=>{
      el.setAttribute('tabindex', el.getAttribute('tabindex') || '0');
      el.addEventListener('keydown', (e)=>{
        if (e.key === ' ' || e.key === 'Enter') { e.preventDefault(); (el===yesBox?onYes:onNo)(); }
        if (e.key === 'ArrowLeft')  { e.preventDefault(); onYes(); }
        if (e.key === 'ArrowRight') { e.preventDefault(); onNo(); }
      });
    });

    setState('no'); // старт
  }

  /* ============================
     РЕЙТИНГ: 5 звёзд (картинки)
     ============================ */
  function initPanelStars(){
    const group = panel.querySelector('.stars-group');
    if (!group || group.dataset.bound === '1') return;
    group.dataset.bound = '1';

    const stars = Array.from(group.querySelectorAll('.star'));
    const clamp = (n)=> Math.max(0, Math.min(5, n));

    // дефолтные src для выключенных
    stars.forEach(btn=>{
      const img = btn.querySelector('.star-img');
      const off = img?.dataset.offSrc || img?.getAttribute('data-off-src') || '';
      if (img && off) img.src = off;
    });

    const apply = (count) => {
      const activeCount = clamp(count);
      stars.forEach((btn, i) => {
        const img = btn.querySelector('.star-img');
        const on  = img?.dataset.onSrc  || img?.getAttribute('data-on-src')  || '';
        const off = img?.dataset.offSrc || img?.getAttribute('data-off-src') || '';
        const active = i < activeCount;
        btn.setAttribute('aria-checked', String(active));
        if (img && (on || off)) img.src = active ? on : off;
      });
      group.dataset.rating = String(activeCount);
    };

    apply(Number(group.dataset.rating || 0));

    stars.forEach((btn, idx) => {
      const click = ()=> apply(idx + 1);
      btn.addEventListener('click', click);
      btn.setAttribute('tabindex', btn.getAttribute('tabindex') || '0');
      btn.addEventListener('keydown', (e)=>{
        if (e.key === ' ' || e.key === 'Enter') { e.preventDefault(); click(); }
        if (e.key === 'ArrowRight') { e.preventDefault(); apply(clamp(Number(group.dataset.rating||0) + 1)); }
        if (e.key === 'ArrowLeft')  { e.preventDefault(); apply(clamp(Number(group.dataset.rating||0) - 1)); }
      });
    });
  }

  /* ============================
     СПИСОК КАТЕГОРІЙ (скролл)
     ============================ */
  function initCategoryList(){
    const box = panel?.querySelector('.cat-scroll');
    if (!box || box.dataset.bound === '1') return;
    box.dataset.bound = '1';

    // Делегирование кликов по .cat-check и .cat-label
    box.addEventListener('click', (e)=>{
      const item  = e.target.closest('.cat-item');
      if (!item) return;
      const btn = e.target.closest('.cat-check') || item.querySelector('.cat-check');
      if (!btn) return;

      const next = !(btn.getAttribute('aria-checked') === 'true');
      btn.setAttribute('aria-checked', String(next));
      btn.classList.toggle('is-checked', next);
    });

    // Доступность с клавиатуры
    box.querySelectorAll('.cat-check').forEach(btn=>{
      if (!btn.hasAttribute('tabindex')) btn.setAttribute('tabindex','0');
      btn.addEventListener('keydown', (e)=>{
        if (e.key === ' ' || e.key === 'Enter'){ e.preventDefault();
          const next = !(btn.getAttribute('aria-checked') === 'true');
          btn.setAttribute('aria-checked', String(next));
          btn.classList.toggle('is-checked', next);
        }
      });
    });
  }

  /* ============================
     ЦІНА: линия + точки + активный отрезок
     ============================ */
  function initPrice(){
    const wrap = panel.querySelector('#priceGroup');
    if (!wrap || wrap.dataset.bound === '1') return;
    wrap.dataset.bound = '1';

    const minVal = Number(wrap.dataset.min || 0);
    const maxVal = Number(wrap.dataset.max || 100000);

    const track  = wrap.querySelector('.price-track');
    const line   = wrap.querySelector('.price-track-line');
    const active = wrap.querySelector('.price-active');
    const dotMin = wrap.querySelector('.price-dot--min');
    const dotMax = wrap.querySelector('.price-dot--max');

    const inFrom = wrap.querySelector('.price-input--from');
    const inTo   = wrap.querySelector('.price-input--to');

    const clamp = (v,min,max)=> Math.min(max, Math.max(min, v|0));
    const pct = (v)=> ((v - minVal) / (maxVal - minVal)) * 100;

    function updateDots(){
      const vFrom = inFrom.value === '' ? null : clamp(Number(inFrom.value), minVal, maxVal);
      const vTo   = inTo.value   === '' ? null : clamp(Number(inTo.value),   minVal, maxVal);

      const lineRect  = line.getBoundingClientRect();
      const trackRect = track.getBoundingClientRect();
      const leftPx  = lineRect.left - trackRect.left;
      const widthPx = lineRect.width;

      if (vFrom !== null){
        dotMin.hidden = false;
        dotMin.style.left = `${leftPx + (pct(vFrom)/100) * widthPx}px`;
      } else {
        dotMin.hidden = true;
      }

      if (vTo !== null){
        dotMax.hidden = false;
        dotMax.style.left = `${leftPx + (pct(vTo)/100) * widthPx}px`;
      } else {
        dotMax.hidden = true;
      }

      const haveFrom = vFrom !== null;
      const haveTo   = vTo   !== null;

      if (!haveFrom && !haveTo){
        active.hidden = true;
        return;
      }

      active.hidden = false;

      const p1 = haveFrom ? pct(vFrom) : null;
      const p2 = haveTo   ? pct(vTo)   : null;

      let leftPercent, rightPercent;
      if (haveFrom && haveTo){
        leftPercent  = Math.min(p1, p2);
        rightPercent = Math.max(p1, p2);
      } else if (haveFrom){
        leftPercent  = p1; rightPercent = p1;
      } else {
        leftPercent  = p2; rightPercent = p2;
      }

      const leftPxActive  = leftPx + (leftPercent/100) * widthPx;
      const rightPxActive = leftPx + (rightPercent/100) * widthPx;

      active.style.left  = `${leftPxActive}px`;
      active.style.width = `${Math.max(0, rightPxActive - leftPxActive)}px`;
      active.style.opacity = (leftPxActive === rightPxActive ? 0.85 : 1);
    }

    function onInputFrom(){
      wrap.style.setProperty('--from-focus', '#35C65E');
      updateDots();
    }
    function onInputTo(){
      wrap.style.setProperty('--to-focus', '#35C65E');
      updateDots();
    }

    inFrom.addEventListener('input', onInputFrom);
    inTo  .addEventListener('input', onInputTo);

    inFrom.addEventListener('blur', ()=> wrap.style.removeProperty('--from-focus'));
    inTo  .addEventListener('blur', ()=> wrap.style.removeProperty('--to-focus'));

    // Пересчёт при ресайзе
    const ro = new ResizeObserver(updateDots);
    ro.observe(track);

    // первичная отрисовка
    updateDots();
  }
})();
</script>

</body>
</html>