:root{
  --stroke:#ECECEC;
  --accent:#35C65E;
  --text:#363535;
  --muted:#828181;
  --bubble:#fff;
  --bg:#fff;
}

.chat-page{
  min-height: calc(100vh - 105px - 388px);
  padding: 40px 24px 24px;
  background: var(--bg);
  font-family: 'Ubuntu', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}

.chat-title{
  margin: 8px auto 20px;
  text-align: center;
  color: var(--text);
  font: 400 18px/24px 'Ubuntu', sans-serif;
}

.chat-card{
  max-width: 1120px;
  margin: 0 auto;
  border: 2px solid var(--stroke);
  border-radius: 12px;
  background: #fff;
  box-shadow: 0 8px 28px rgba(0,0,0,.04);
  display: grid;
  grid-template-rows: 1fr auto;
  overflow: hidden;
}

/* лента сообщений */
.chat-scroll{
  max-height: 58vh;
  overflow: auto;
  padding: 20px;
  background: #fff;
}

.msg{
  display: flex;
  margin-bottom: 12px;
}
.msg.assistant{ justify-content: flex-start; }
.msg.user{ justify-content: flex-end; }

.msg-bubble{
  max-width: min(760px, 90%);
  border: 2px solid var(--stroke);
  background: var(--bubble);
  color: #000;
  border-radius: 12px;
  padding: 12px 14px;
  line-height: 1.45;
  font-size: 14px;
}
.msg.user .msg-bubble{
  background: rgba(53,198,94,0.08);
  border-color: rgba(53,198,94,0.28);
}

.msg-text{ white-space: pre-wrap; word-wrap: break-word; }

.msg-files{ margin-top: 8px; display: flex; gap: 8px; flex-wrap: wrap; }
.msg-file{
  font-size: 12px;
  padding: 4px 8px;
  border: 1.5px solid var(--stroke);
  border-radius: 8px;
  color: var(--text);
  text-decoration: none;
}
.msg-file:hover{ border-color: var(--accent); color: var(--accent); }

/* typing… */
.typing{ display:flex; gap:6px; align-items:center; padding: 8px 2px 16px 6px; }
.typing .dot{
  width: 7px; height: 7px; border-radius:50%; background:#cfcfcf; animation: blink 1.2s infinite ease-in-out;
}
.typing .dot:nth-child(2){ animation-delay: .15s; }
.typing .dot:nth-child(3){ animation-delay: .3s; }
@keyframes blink{ 0%, 80%, 100%{opacity:.3} 40%{opacity:1} }

/* composer (низ карточки) */
.composer{
  position: relative;
  padding: 16px 16px 14px;
  border-top: 2px solid var(--stroke);
  background: #fff;
}

.msg-input{
  width: 100%;
  height: 55px;
  border: 2px solid #828181;
  border-radius: 10px;
  background: #fff;
  color: #000;
  font: 400 14px/24px 'Ubuntu', sans-serif;
  padding: 13.5px 92px 13.5px 14px; /* место под кнопки справа */
  outline: none;
  resize: none;
  overflow: hidden;
  transition: border-color .15s ease, padding .15s ease, box-shadow .15s ease;
}
.msg-input.multiline{ padding-top:8px; padding-bottom:8px; }
.msg-input:focus,
.msg-input.is-filled{ border-color: var(--accent); }

.composer-actions{
  position: absolute;
  right: 26px;
  bottom: 26px;
  display: flex; gap: 10px;
}

/* attach */
.attach{ display:inline-flex; width:28px; height:28px; cursor:pointer; }
.attach input{ display:none; }
.attach img{ width:100%; height:100%; object-fit: contain; opacity:.9; }
.attach:hover img{ opacity:1; }

/* send */
.send{
  width: 32px; height: 32px;
  border: 0; border-radius: 8px;
  background: var(--accent);
  display: inline-flex; align-items:center; justify-content:center;
  cursor: pointer;
}
.send:disabled{ opacity:.6; cursor:not-allowed; }
.send img{ width:18px; height:18px; filter: brightness(0) invert(1); }

/* прикрепленные до отправки */
.pending-files{
  display:flex; gap:8px; flex-wrap:wrap;
  margin-top: 10px;
}
.pending-file{
  border:1.5px solid var(--stroke);
  border-radius:8px;
  padding:4px 6px;
  font-size:12px;
  color:var(--text);
  display:flex; gap:6px; align-items:center;
  max-width: 100%;
}
.pending-file .name{
  overflow:hidden; text-overflow:ellipsis; white-space:nowrap; max-width: 280px;
}
.pending-file button{
  all:unset; cursor:pointer; color:#888; padding:0 4px; font-weight:700;
}
.pending-file button:hover{ color:#000; }

/* адаптив */
@media (max-width: 960px){
  .chat-card{ margin: 0 4px; }
  .msg-bubble{ max-width: 92%; }
}
