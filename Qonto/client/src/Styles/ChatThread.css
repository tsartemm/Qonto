/* Dialog base */
.dialog-page { width: 100vw; margin-left: calc(50% - 50vw); }
.dialog-header { margin: 16px 0 10px; padding-left: 64px; }
.dialog-back { display: inline-flex; align-items: center; gap: 10px; text-decoration: none; color: #2bae66; font-weight: 700; font-size: 26px; }
.dialog-back img { width: 32px; height: 32px; display:block; }

/* --- CARD AS FLEX COLUMN so input can stick to bottom --- */
.dialog-card {
  background: #fff; border: 1px solid #eee; border-radius: 18px;
  box-shadow: 0 10px 26px rgba(0,0,0,.06);
  width: min(980px, 94%); margin: 0 auto; overflow: hidden;

  /* NEW: make the card a column that fills the viewport */
  display: flex;
  flex-direction: column;
  /* подстрой при необходимости: это "высота хедера сверху + внешний отступ".
     если вдруг низ прячется под футер, снизь 220px до ~200px или меньше */
  min-height: calc(100vh - 220px);
}

/* NEW: the scrollable messages area should take the remaining space */
.dialog-box {
  background: #f6fbf8;
  padding: 18px;
  flex: 1 1 auto;           /* <-- вместо max-height */
  overflow-y: auto;
}

/* Messages layout — avatar aligned with bubble top + little gap */
.message { display:flex; gap:12px; align-items: flex-start; margin-bottom: 12px; }
.message.me { justify-content: flex-end; }
.msg-avatar { width: 28px; height: 28px; margin-top: 0; flex: 0 0 28px; align-self: flex-start; }

/* keep reasonable max width for content */
.bubble-wrap { max-width: 60%; position: relative; } /* немного уже, чтобы картинки не казались огромными */
.bubble { background: #eef2ff; border-radius: 14px; padding: 10px 12px; line-height: 1.35; }
.bubble.me { background: #e8f5ee; }

/* attachments — вернули умеренный размер */
.attachment-img { display:block; height:auto; width: 100%; max-width: 480px; border-radius: 12px; }

/* Hover actions — only on hover, green */
.hover-actions {
  opacity: 0;
  transition: opacity .15s ease;
  display: inline-flex;
  gap: 6px;
  margin-top: 6px;
  color: #2bae66;
}
.message:hover .hover-actions { opacity: 1; }
.icon-btn { color: #2bae66; border: none; background: transparent; cursor: pointer; }
.icon-btn:hover { opacity: .8; }

/* Time at left for me / right for other */
.time-inline {
  font-size: 12px;
  color: #9aa1a9;
  margin-top: 4px;
  white-space: nowrap;
  align-self: center;
}
.time-inline.left { margin-right: 6px; }
.time-inline.right { margin-left: 6px; }

/* Day separator */
.day-sep {
  text-align: center;
  color: #9aa1a9;
  font-size: 14px;
  margin: 14px 0 10px;
}

/* hide old under-bubble time */
.bubble .time, .bubble .row .time { display: none !important; }

/* --- INPUT BAR PINNED TO BOTTOM --- */
.pm-input-bar {
  /* раньше было просто padding:0; */
  margin-top: auto;          /* <-- прижать вниз, даже если нет сообщений */
  position: sticky;
  bottom: 0;
  background: #fff;
  z-index: 1;                /* поверх содержимого при прокрутке */
  padding: 0;                /* как и было */
}

.composer-bar {
  padding: 12px;
  border-top: 1px solid #eef2f5;
  background:#fff;
}

.composer-field { position: relative; }

.msg-input {
  width: 100%;
  min-height: 55px;
  max-height: 55px;
  border: 2px solid #828181;
  border-radius: 10px;
  background: #fff;
  color: #000;
  font: 400 14px/24px 'Ubuntu', system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif;
  outline: none;
  resize: none;
  overflow: hidden;
  padding: 13.5px 118px 13.5px 14px;
}
.msg-input.multiline { padding-top: 8px; padding-bottom: 8px; }
.msg-input::placeholder { color: #828181; opacity: 1; }
.msg-input:focus, .msg-input.is-filled { border-color: #35C65E; }

.msg-tools {
  position: absolute; right: 12px; top: 50%; transform: translateY(-50%);
  display: inline-flex; align-items: center; gap: 10px;
}
.msg-attach-btn { width: 26px; height: 26px; border: none; background: transparent; padding: 0; cursor: pointer; opacity: .9; }
.msg-attach-img { width: 100%; height: 100%; display: block; }
.msg-send-btn { width: 26px; height: 28px; border: none; padding: 0; background: transparent; cursor: pointer; opacity: .9; transform: rotate(90deg); }
.msg-send-img { width: 100%; height: 100%; object-fit: cover; transform: rotate(-90deg); }

@media (min-width: 1280px) { .dialog-header { padding-left: 80px; } }
